export async function renderProfiles(containerSelector) { const container = document.querySelector(containerSelector); if (!container) return; try { const res = await fetch('/data/profiles.json'); const data = await res.json(); const cards = data.map(p => ` <article class="profile-card" data-id="${p.id}" tabindex="0" role="button"> <img src="${p.image}" alt="${p.name} photo" loading="lazy" width="160" height="160"> <h3>${p.name}, <small>${p.age}</small></h3> <p>${p.location}</p> <p>${p.bio}</p> <button class="open-modal" data-id="${p.id}">View</button> </article> `).join(''); container.innerHTML = cards; container.querySelectorAll('.open-modal').forEach(btn => { btn.addEventListener('click', (e) => { const id = e.currentTarget.dataset.id; const item = data.find(x => String(x.id) === String(id)); if (item) openProfileModal(item); }); }); } catch (err) { console.error('Failed to load profiles', err); container.innerHTML = '<p>Failed to load profiles.</p>'; } } export function openProfileModal(item) { let modal = document.getElementById('profileModal'); if (!modal) { modal = document.createElement('div'); modal.id = 'profileModal'; modal.className = 'modal'; modal.innerHTML = ` <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modalTitle"> <button class="close-modal" aria-label="Close">&times;</button> <h2 id="modalTitle">${item.name}</h2> <img src="${item.image}" alt="${item.name} photo" loading="lazy"> <p><strong>Age:</strong> ${item.age}</p> <p><strong>Location:</strong> ${item.location}</p> <p>${item.bio}</p> </div> `; document.body.appendChild(modal); modal.querySelector('.close-modal').addEventListener('click', () => modal.remove()); modal.addEventListener('click', (e) => { if (e.target === modal) modal.remove(); }); } else { modal.querySelector('#modalTitle').textContent = item.name; } } export function initThemeToggle(btnSelector) { const btn = document.querySelector(btnSelector); if (!btn) return; const current = localStorage.getItem('theme') || 'light'; document.documentElement.setAttribute('data-theme', current); btn.addEventListener('click', () => { const t = document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light'; document.documentElement.setAttribute('data-theme', t); localStorage.setItem('theme', t); }); }